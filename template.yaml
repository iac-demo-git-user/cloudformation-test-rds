{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "A sample template",
    "Resources": {
    
    "MyDB" : {
 	"Type" : "AWS::RDS::DBInstance",
 	"Properties" : {
     		"DBSecurityGroups" : [
        		{"Ref" : "MyDbSecurityByEC2SecurityGroup"}],
     		"AllocatedStorage" : "5",
     		"DBInstanceClass" : "db.t2.small",
     		"Engine" : "MySQL",
     		"MasterUsername" : "root",
     		"MasterUserPassword" : "Harsh@1993"
 	}
    },
    "DBSecurityGroup": {
   	"Type": "AWS::RDS::DBSecurityGroup",
   	"Properties": {
      	"DBSecurityGroupIngress": { "EC2SecurityGroupName": { "Ref": "WebServerSecurityGroup" } },
      	"GroupDescription"      : "Frontend Access"
   	}
    },
    "WebServerSecurityGroup" : {
   "Type" : "AWS::EC2::SecurityGroup",
   "Properties" : {
      "GroupDescription" : "Enable HTTP access via port 80 and SSH access",
      "SecurityGroupIngress" : [
         {"IpProtocol" : "tcp", "FromPort" : "80", "ToPort" : "80", "CidrIp" : "0.0.0.0/0"},
         {"IpProtocol" : "tcp", "FromPort" : "22", "ToPort" : "22", "CidrIp" : "0.0.0.0/0"}
      ]
   }
}
  }
}
